<!DOCTYPE html>
<html>

    <head>
        <title>Face++ test</title>
        <script
            src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>
        <script src="facePlusPlusApi.js"></script>
        <script src="fxHelper.js"></script>
        <script src="https://www.gstatic.com/firebasejs/4.8.1/firebase.js"></script>

    </head>
    <body>
        <form id="form" action="#" method="multipart-formdata">
            <input type="file" id="file" />
            <input type="submit" />
        </form>
        <br/>

        <canvas class="face" id="face_1">

        </canvas>
        <script src="storage.js"></script>
        <script>
            $(document).ready(function () {
                $("#form").submit(function (event) {
                    //stop submit the form, we will post it manually.
                    event.preventDefault();
                    var options = {
                        boundingbox: false,
                        highlight: true
                    };
                    var face = new facePlusPlusApi();
                    var token = face.detectFaceFromForm("file");
                    var coordinates = face.analyzeFace(token);
                    face.setCanvasDimensionsFromFileInput("file", "face_1");
                    face.drawCanvasImageFromFileUpload("file", "face_1", coordinates, options);
                    setTimeout(function () {
                        var fx = new fxHelper();
                        fx.applyFilter("face_1", coordinates, "top-hat");
                        fx.applyFilter("face_1", coordinates, "eye-lasers");
                    }, 500);

                    // uploadImage("face_1");
                    getImageCanvas("face_1");
                });
            });
        </script>
    </body>
</html>